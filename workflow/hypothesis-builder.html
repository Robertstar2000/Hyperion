<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Project Hypatia - Hypothesis Builder</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body {
      background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
      min-height: 100vh;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
    }
    .navbar {
      background-color: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      border-radius: 10px;
      margin-bottom: 30px;
    }
    .navbar-brand {
      font-weight: bold;
      color: white !important;
      font-size: 24px;
    }
    .nav-link {
      color: rgba(255, 255, 255, 0.8) !important;
      font-size: 16px;
      margin: 0 10px;
    }
    .nav-link:hover {
      color: white !important;
    }
    .workflow-header {
      color: white;
      margin-bottom: 30px;
    }
    .card {
      border-radius: 15px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
      border: none;
      margin-bottom: 20px;
      overflow: hidden;
    }
    .card-header {
      background: linear-gradient(to right, #4776E6, #8E54E9);
      color: white;
      border-bottom: none;
      padding: 15px 20px;
    }
    .card-body {
      padding: 20px;
    }
    .btn-primary {
      background: linear-gradient(to right, #4776E6, #8E54E9);
      border: none;
      border-radius: 8px;
      padding: 10px 20px;
      font-weight: bold;
    }
    .btn-primary:hover {
      background: linear-gradient(to right, #3a67d4, #7d48d6);
    }
    .progress-container {
      margin-bottom: 30px;
    }
    .progress {
      height: 10px;
      border-radius: 5px;
      background-color: rgba(255, 255, 255, 0.2);
    }
    .progress-bar {
      background: linear-gradient(to right, #FF512F, #F09819);
    }
    .step-indicator {
      display: flex;
      justify-content: space-between;
      margin-top: 10px;
    }
    .step {
      color: white;
      font-size: 12px;
      text-align: center;
      position: relative;
      width: 10%;
    }
    .step.active {
      font-weight: bold;
      color: #F09819;
    }
    .form-control {
      border-radius: 8px;
      padding: 12px;
      margin-bottom: 15px;
    }
    .form-label {
      font-weight: bold;
    }
    .ai-suggestion {
      background-color: rgba(255, 255, 255, 0.1);
      border-radius: 10px;
      padding: 15px;
      margin-bottom: 15px;
      color: white;
    }
    .ai-suggestion-header {
      display: flex;
      align-items: center;
      margin-bottom: 10px;
    }
    .ai-icon {
      width: 30px;
      height: 30px;
      background-color: #F09819;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-right: 10px;
    }
    .hypothesis-quality {
      display: flex;
      align-items: center;
      margin-top: 20px;
    }
    .quality-meter {
      flex-grow: 1;
      height: 10px;
      background-color: #e9ecef;
      border-radius: 5px;
      margin: 0 10px;
      overflow: hidden;
    }
    .quality-fill {
      height: 100%;
      background: linear-gradient(to right, #FF512F, #F09819);
      width: 75%;
    }
  </style>
</head>
<body>
  <div class="container">
    <nav class="navbar navbar-expand-lg">
      <div class="container-fluid">
        <a class="navbar-brand" href="../index.html">Project Hypatia</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav ms-auto">
            <li class="nav-item">
              <a class="nav-link" href="../dashboard.html">Dashboard</a>
            </li>
            <li class="nav-item">
              <span class="nav-link" id="userEmail"></span>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#" id="logoutBtn">Logout</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <div class="workflow-header">
      <h1>Hypothesis Builder</h1>
      <p class="lead">Step 3 of 10: Formulate your hypothesis</p>
    </div>

    <div class="progress-container">
      <div class="progress">
        <div class="progress-bar" role="progressbar" style="width: 30%" aria-valuenow="30" aria-valuemin="0" aria-valuemax="100"></div>
      </div>
      <div class="step-indicator">
        <div class="step">Question</div>
        <div class="step">Research</div>
        <div class="step active">Hypothesis</div>
        <div class="step">Methodology</div>
        <div class="step">Data</div>
        <div class="step">Experiment</div>
        <div class="step">Analysis</div>
        <div class="step">Conclusion</div>
        <div class="step">Review</div>
        <div class="step">Publication</div>
      </div>
    </div>

    <div class="row">
      <div class="col-lg-8">
        <div class="card">
          <div class="card-header">
            <h5 class="card-title mb-0">Formulate Your Hypothesis</h5>
          </div>
          <div class="card-body">
            <form id="hypothesisForm">
              <div class="mb-3">
                <label for="hypothesisType" class="form-label">Hypothesis Type</label>
                <select class="form-select" id="hypothesisType">
                  <option selected>Select hypothesis type</option>
                  <option value="directional">Directional Hypothesis</option>
                  <option value="non_directional">Non-Directional Hypothesis</option>
                  <option value="null">Null Hypothesis</option>
                  <option value="alternative">Alternative Hypothesis</option>
                </select>
              </div>
              <div class="mb-3">
                <label for="hypothesisStatement" class="form-label">Hypothesis Statement</label>
                <textarea class="form-control" id="hypothesisStatement" rows="4" placeholder="If [independent variable], then [dependent variable] will [expected outcome]"></textarea>
                <small class="text-muted">Formulate your hypothesis as a clear, testable statement that predicts the relationship between variables.</small>
              </div>
              <div class="mb-3">
                <label for="nullHypothesis" class="form-label">Null Hypothesis (H₀)</label>
                <textarea class="form-control" id="nullHypothesis" rows="2" placeholder="There is no relationship between [independent variable] and [dependent variable]"></textarea>
              </div>
              <div class="mb-3">
                <label for="alternativeHypothesis" class="form-label">Alternative Hypothesis (H₁)</label>
                <textarea class="form-control" id="alternativeHypothesis" rows="2" placeholder="There is a relationship between [independent variable] and [dependent variable]"></textarea>
              </div>
              <div class="mb-3">
                <label for="justification" class="form-label">Justification</label>
                <textarea class="form-control" id="justification" rows="3" placeholder="Explain why you believe this hypothesis is valid based on your research"></textarea>
              </div>
              <div class="hypothesis-quality">
                <span>Hypothesis Quality:</span>
                <div class="quality-meter">
                  <div class="quality-fill"></div>
                </div>
                <span>75%</span>
              </div>
              <div class="d-flex justify-content-between mt-4">
                <button type="button" class="btn btn-outline-primary" id="prevStepBtn">Previous Step</button>
                <button type="button" class="btn btn-primary" id="nextStepBtn">Next: Methodology Designer</button>
              </div>
            </form>
          </div>
        </div>
      </div>
      <div class="col-lg-4">
        <div class="card">
          <div class="card-header">
            <h5 class="card-title mb-0">AI Suggestions</h5>
          </div>
          <div class="card-body">
            <div class="ai-suggestion">
              <div class="ai-suggestion-header">
                <div class="ai-icon">AI</div>
                <h6 class="mb-0">Hypothesis Structure</h6>
              </div>
              <p>A strong hypothesis should be clear, specific, and testable. It should identify the independent and dependent variables and predict their relationship.</p>
            </div>
            <div class="ai-suggestion">
              <div class="ai-suggestion-header">
                <div class="ai-icon">AI</div>
                <h6 class="mb-0">Suggested Hypothesis</h6>
              </div>
              <p>Based on your research question and literature review, consider: "If the temperature of the reaction environment increases, then the rate of the chemical reaction will increase proportionally."</p>
            </div>
            <div class="ai-suggestion">
              <div class="ai-suggestion-header">
                <div class="ai-icon">AI</div>
                <h6 class="mb-0">Improvement Tips</h6>
              </div>
              <ul>
                <li>Specify the temperature range</li>
                <li>Define how reaction rate will be measured</li>
                <li>Consider adding a quantitative prediction</li>
              </ul>
            </div>
            <button type="button" class="btn btn-outline-primary w-100 mt-3" id="refineHypothesis">Refine My Hypothesis</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    // Check if user is authenticated
    document.addEventListener('DOMContentLoaded', function() {
      const isAuthenticated = localStorage.getItem('isAuthenticated');
      const userEmail = localStorage.getItem('userEmail');
      
      if (!isAuthenticated || !userEmail) {
        // Redirect to login if not authenticated
        window.location.href = '../login.html';
        return;
      }
      
      // Display user email
      document.getElementById('userEmail').textContent = userEmail;
      
      // Handle logout
      document.getElementById('logoutBtn').addEventListener('click', function(e) {
        e.preventDefault();
        localStorage.removeItem('isAuthenticated');
        localStorage.removeItem('userEmail');
        window.location.href = '../login.html';
      });
      
      // Handle previous step button
      document.getElementById('prevStepBtn').addEventListener('click', function() {
        window.location.href = 'research-explorer.html';
      });
      
      // Handle next step button
      document.getElementById('nextStepBtn').addEventListener('click', function() {
        // Save form data to localStorage
        const hypothesisType = document.getElementById('hypothesisType').value;
        const hypothesisStatement = document.getElementById('hypothesisStatement').value;
        const nullHypothesis = document.getElementById('nullHypothesis').value;
        const alternativeHypothesis = document.getElementById('alternativeHypothesis').value;
        const justification = document.getElementById('justification').value;
        
        localStorage.setItem('hypothesisType', hypothesisType);
        localStorage.setItem('hypothesisStatement', hypothesisStatement);
        localStorage.setItem('nullHypothesis', nullHypothesis);
        localStorage.setItem('alternativeHypothesis', alternativeHypothesis);
        localStorage.setItem('justification', justification);
        localStorage.setItem('currentStep', 'Methodology Design');
        
        // Navigate to next step
        window.location.href = 'methodology-designer.html';
      });
      
      // Handle refine hypothesis button
      document.getElementById('refineHypothesis').addEventListener('click', function() {
        // In a real app, this would call the LLM API
        alert('AI would refine your hypothesis based on your input and research.');
        
        // For demo purposes, fill in some sample data
        document.getElementById('hypothesisType').value = 'directional';
        document.getElementById('hypothesisStatement').value = 'If the temperature of the reaction environment increases from 10°C to 50°C, then the rate of the chemical reaction will increase according to the Arrhenius equation, with approximately a doubling of rate for each 10°C increase.';
        document.getElementById('nullHypothesis').value = 'There is no relationship between temperature and the rate of the chemical reaction.';
        document.getElementById('alternativeHypothesis').value = 'There is a positive relationship between temperature and the rate of the chemical reaction.';
        document.getElementById('justification').value = 'According to the Arrhenius equation and the collision theory, higher temperatures provide more kinetic energy to molecules, increasing the frequency of collisions and the proportion of collisions with sufficient energy to overcome the activation energy barrier. This is supported by multiple studies in the literature review.';
        
        // Update quality meter
        document.querySelector('.quality-fill').style.width = '90%';
        document.querySelector('.hypothesis-quality span:last-child').textContent = '90%';
      });
    });
  </script>
</body>
</html>
